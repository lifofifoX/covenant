<a class="group block cursor-pointer"
    href="/<%= encodeURIComponent(collection.slug) %>/<%= encodeURIComponent(inscription.id) %>"
    data-testid="inscription-card" data-inscription-id="<%= inscription.id %>">

    <!-- Image Container -->
    <div
        class="relative aspect-square overflow-hidden rounded-2xl bg-white/[0.03] ring-1 ring-white/10 transition-all duration-500 group-hover:ring-orange-500/50 group-hover:shadow-2xl group-hover:shadow-orange-500/10 card-lift">
        <!-- Gradient Overlay -->
        <div
            class="absolute inset-0 bg-gradient-to-tr from-orange-500/10 to-transparent opacity-0 transition-opacity duration-500 group-hover:opacity-100">
        </div>

        <div class="relative h-full w-full overflow-hidden <%= (order && (order.status === 'pending' || order.status === 'confirmed')) ? 'opacity-60 grayscale' : '' %>"
            data-controller="image">
            <div class="absolute inset-0 skeleton-shimmer" data-image-target="skeleton"></div>

            <% if (order && order.status==='pending' ) { %>
                <div class="absolute inset-0 z-10 flex items-center justify-center bg-black/30 backdrop-blur-sm">
                    <span class="button-spinner text-orange-400 h-6 w-6"></span>
                </div>
                <% } %>
                    <% if (order && order.status==='confirmed' ) { %>
                        <div
                            class="absolute inset-0 z-10 flex items-center justify-center bg-black/30 backdrop-blur-sm">
                            <span
                                class="badge-sold rounded-full px-4 py-2 text-xs font-bold uppercase tracking-wider">Sold</span>
                        </div>
                        <% } %>

                            <div
                                class="absolute inset-0 flex items-center justify-center p-8 transition-transform duration-700 ease-out group-hover:scale-105">
                                <% if (inscription.isImage) { %>
                                    <img src="<%= inscription.contentUrl %>" alt="<%= inscription.title %>"
                                        loading="lazy" decoding="async" style="image-rendering: pixelated"
                                        class="block h-full w-full object-contain drop-shadow-2xl img-reveal"
                                        data-image-target="img" data-action="load->image#loaded error->image#error"
                                        data-testid="inscription-thumb" />
                                    <% } else { %>
                                        <iframe src="<%= inscription.previewUrl %>"
                                            class="block h-full w-full border-0 pointer-events-none opacity-0 transition-opacity duration-500"
                                            loading="lazy" data-image-target="media"
                                            data-action="load->image#loaded error->image#error"
                                            data-testid="inscription-thumb"></iframe>
                                        <% } %>
                            </div>
        </div>
    </div>

    <!-- Clean Metadata Below Card -->
    <div class="mt-4 text-center">
        <h3 class="truncate text-base font-bold text-white group-hover:text-orange-400 transition-colors">
            <%= inscription.title %>
        </h3>
        <div class="mt-1 flex items-center justify-center gap-3 text-sm font-medium">
            <span class="price-gradient font-bold">
                <%= formatSats(collection.price_sats) %>
            </span>
            <% if (order && order.status==='pending' ) { %>
                <span class="text-orange-400 text-xs uppercase font-bold">Pending</span>
                <% } else if (order && order.status==='confirmed' ) { %>
                    <span class="text-emerald-400 text-xs uppercase font-bold">Sold</span>
                    <% } %>
        </div>
    </div>
</a>