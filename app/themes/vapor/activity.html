<section data-testid="activity-page">
  <div class="section">
    <h2 class="section-title" data-testid="page-title">
      Recent Activity
      <span class="section-title-jp">アクティビティ</span>
    </h2>

    <div class="activity-table-window window">
      <div class="window-titlebar">
        <div class="window-title">
          <div class="window-title-icon"></div>
          transactions.log
        </div>
        <div class="window-controls">
          <button class="window-btn">_</button>
          <button class="window-btn">□</button>
          <button class="window-btn">×</button>
        </div>
      </div>
      <% if ((orders ?? []).length === 0) { %>
        <div class="empty-state" data-testid="empty-state">
          <p>NO TRANSACTIONS RECORDED // なし</p>
        </div>
      <% } else { %>
        <table class="activity-table" data-testid="orders">
          <thead>
            <tr>
              <th>Inscription</th>
              <th>Price</th>
              <th>Buyer</th>
              <th>Status</th>
              <th>TX</th>
            </tr>
          </thead>
          <tbody>
            <% orders.forEach((o) => { %>
              <tr data-testid="order-row">
                <td>
                  <a href="/<%= encodeURIComponent(o.collection_slug) %>/<%= encodeURIComponent(o.inscription_id) %>" data-testid="order-inscription-link">
                    <%= o.inscription_id.substring(0, 12) %>...
                  </a>
                </td>
                <td data-testid="order-price">
                  <% if (o.price_sats) { %>
                    <%= formatSats(o.price_sats) %>
                  <% } else { %>
                    -
                  <% } %>
                </td>
                <td>
                  <% if (o.buyer_address) { %>
                    <%= o.buyer_address.substring(0, 8) %>...
                  <% } else { %>
                    -
                  <% } %>
                </td>
                <td data-testid="order-status">
                  <% if (o.status === 'pending') { %>
                    <span class="badge badge-pending">Pending</span>
                  <% } else if (o.status === 'confirmed') { %>
                    <span class="badge badge-available">Confirmed</span>
                  <% } else { %>
                    <span class="badge badge-sold"><%= o.status.toUpperCase() %></span>
                  <% } %>
                </td>
                <td>
                  <% if (o.txid) { %>
                    <a href="https://mempool.space/tx/<%= encodeURIComponent(o.txid) %>" target="_blank" rel="noopener" data-testid="order-tx-link">View</a>
                  <% } else { %>
                    -
                  <% } %>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } %>
    </div>
  </div>
</section>
