<turbo-frame id="launchpad-progress">
  <% const isGallery = Boolean(collection.gallery_inscription_id) %>
  <% const totalWorks = parentInscription ? (isGallery ? parentInscription.galleryCount : parentInscription.childCount) : supply.total %>
  <% const mintedCount = Math.max(0, totalWorks - supply.available) %>
  <% const mintedPercent = totalWorks > 0 ? Math.round((mintedCount / totalWorks) * 100) : 0 %>

  <div class="progress-section" data-testid="progress-section" style="margin-bottom: 1.25rem; border: 3px solid var(--color-primary); background: var(--color-surface); padding: 1rem;">
    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.8rem; text-transform: uppercase; color: var(--color-muted);">
      <span>Supply</span>
      <span style="color: var(--color-primary); font-weight: 700;"><%= totalWorks %></span>
    </div>
    <div class="progress-bar" style="height: 10px; background: var(--color-muted); border: 2px solid var(--color-primary); border-radius: 6px; overflow: hidden;">
      <div
        class="progress-fill"
        style="height: 100%; width: <%= mintedPercent %>%; background: var(--color-accent); transition: width 0.3s;"
        data-testid="progress-fill"
      ></div>
    </div>
    <div style="margin-top: 0.5rem; display: flex; justify-content: space-between; font-size: 0.75rem; text-transform: uppercase; color: var(--color-muted);">
      <span style="display: inline-flex; align-items: center; gap: 6px;">
        <span style="width: 10px; height: 10px; background: var(--color-accent); border: 2px solid var(--color-primary);"></span>
        Taken <strong style="color: var(--color-primary);"><%= mintedCount %></strong>
      </span>
      <span style="display: inline-flex; align-items: center; gap: 6px;">
        <span class="button-spinner" style="width: 10px; height: 10px; border-width: 1.5px; color: var(--color-warning);"></span>
        Pending <strong style="color: var(--color-primary);"><%= supply.pending %></strong>
      </span>
      <span style="display: inline-flex; align-items: center; gap: 6px;">
        <span style="width: 10px; height: 10px; background: var(--color-muted); border: 2px solid var(--color-primary);"></span>
        Available <strong style="color: var(--color-primary);"><%= supply.available %></strong>
      </span>
    </div>
  </div>
</turbo-frame>
