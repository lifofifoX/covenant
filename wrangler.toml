name = "covenant"
main = "app/workers/app/index.js"
compatibility_date = "2025-12-17"
workers_dev = false
preview_urls = false
assets = { directory = "public" }

[[routes]]
pattern = "covenant.wizards.art"
custom_domain = true

[[d1_databases]]
binding = "DB"
database_name = "covenant"
database_id = "5ab64e45-a78f-4692-939e-7eec3000b341"

[[durable_objects.bindings]]
name = "SIGNING_AGENT"
class_name = "SigningAgentWorker"
script_name = "covenant-signing-agent"

[[durable_objects.bindings]]
name = "LAUNCHPAD_RESERVATIONS"
class_name = "LaunchpadReservationWorker"

[[ratelimits]]
name = "LAUNCHPAD_ADDRESS_LIMITER"
namespace_id = "3001"
simple = { limit = 6, period = 10 }

[[ratelimits]]
name = "LAUNCHPAD_IP_LIMITER"
namespace_id = "3003"
simple = { limit = 20, period = 10 }

[[migrations]]
tag = "v1"
new_sqlite_classes = ["LaunchpadReservationWorker"]

[triggers]
crons = ["*/5 * * * *", "*/10 * * * *"]

[[rules]]
globs = ["**/*.html"]
type = "Text"
fallthrough = true

[[rules]]
globs = ["**/*.yml", "**/*.yaml"]
type = "Text"
fallthrough = true
